{"ast":null,"code":"import _asyncToGenerator from \"/Users/anders/Desktop/work/Vue/Posting-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport \"regenerator-runtime/runtime.js\";\nimport { HTTP } from '@/services/axios.js';\n\nvar newPost = function newPost() {\n  return {\n    online: false,\n    liked: 0,\n    user: {\n      name: 'Planck Anders',\n      image_url: 'https://scontent-mxp1-1.xx.fbcdn.net/v/t1.6435-9/69245733_725030284603206_5683149216247971840_n.jpg?_nc_cat=104&ccb=1-5&_nc_sid=09cbfe&_nc_ohc=2wstdYB3PNQAX89jAUm&tn=L8SKpZX-hIdGHkiX&_nc_ht=scontent-mxp1-1.xx&oh=9067fd6a9e1a4aa9a72add11944ddd40&oe=614F37FD'\n    },\n    title: '',\n    description: '',\n    images: [],\n    tags: []\n  };\n};\n\nvar registerPost = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(data) {\n    var accessInfo;\n    return regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            accessInfo = localStorage.getItem('accessInfo');\n\n            if (!(accessInfo != 'undefined' && accessInfo != null)) {\n              _context.next = 5;\n              break;\n            }\n\n            accessInfo = JSON.parse(accessInfo);\n            _context.next = 5;\n            return HTTP.post('posts', data, {\n              headers: {\n                Authorization: 'Barear' + accessInfo.token\n              }\n            }).then();\n\n          case 5:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function registerPost(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nvar GetAllPosts = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {\n    var user;\n    return regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            user = localStorage.getItem('accessInfo');\n\n            if (!(user != 'undefine' && user != null)) {\n              _context2.next = 5;\n              break;\n            }\n\n            user = JSON.parse(user);\n            _context2.next = 5;\n            return HTTP.get('posts', {\n              headers: {\n                'Authorization': 'Bearer ' + user.token\n              }\n            }).then(function (response) {\n              localStorage.setItem('Posts', JSON.stringify(response.data));\n            }).catch(function (error) {\n              console.log(error);\n            });\n\n          case 5:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n\n  return function GetAllPosts() {\n    return _ref2.apply(this, arguments);\n  };\n}();\n\nvar allPosts = function allPosts() {\n  GetAllPosts();\n  var posts = localStorage.getItem('Posts');\n\n  if (posts != 'undefined' && posts != null) {\n    return JSON.parse(posts);\n  }\n\n  return [];\n};\n\nexport { newPost, allPosts };","map":{"version":3,"sources":["/Users/anders/Desktop/work/Vue/Posting-app/src/services/PostsServices.js"],"names":["HTTP","newPost","online","liked","user","name","image_url","title","description","images","tags","registerPost","data","accessInfo","localStorage","getItem","JSON","parse","post","headers","Authorization","token","then","GetAllPosts","get","response","setItem","stringify","catch","error","console","log","allPosts","posts"],"mappings":";;AAAA,SAAQA,IAAR,QAAmB,qBAAnB;;AAEA,IAAMC,OAAO,GAAG,SAAVA,OAAU,GAAY;AAC1B,SAAO;AACLC,IAAAA,MAAM,EAAE,KADH;AAELC,IAAAA,KAAK,EAAC,CAFD;AAGLC,IAAAA,IAAI,EAAE;AACJC,MAAAA,IAAI,EAAE,eADF;AAEJC,MAAAA,SAAS,EAAE;AAFP,KAHD;AAOLC,IAAAA,KAAK,EAAE,EAPF;AAQLC,IAAAA,WAAW,EAAE,EARR;AASLC,IAAAA,MAAM,EAAE,EATH;AAULC,IAAAA,IAAI,EAAC;AAVA,GAAP;AAYD,CAbD;;AAgBA,IAAMC,YAAY;AAAA,qEAAG,iBAAgBC,IAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AACfC,YAAAA,UADe,GACFC,YAAY,CAACC,OAAb,CAAqB,YAArB,CADE;;AAAA,kBAEfF,UAAU,IAAI,WAAd,IAA6BA,UAAU,IAAI,IAF5B;AAAA;AAAA;AAAA;;AAGjBA,YAAAA,UAAU,GAAGG,IAAI,CAACC,KAAL,CAAWJ,UAAX,CAAb;AAHiB;AAAA,mBAKXb,IAAI,CAACkB,IAAL,CAAU,OAAV,EAAmBN,IAAnB,EAAyB;AAC7BO,cAAAA,OAAO,EAAE;AACPC,gBAAAA,aAAa,EAAE,WAAWP,UAAU,CAACQ;AAD9B;AADoB,aAAzB,EAKLC,IALK,EALW;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAAZX,YAAY;AAAA;AAAA;AAAA,GAAlB;;AAcA,IAAMY,WAAW;AAAA,sEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AACdnB,YAAAA,IADc,GACPU,YAAY,CAACC,OAAb,CAAqB,YAArB,CADO;;AAAA,kBAGdX,IAAI,IAAE,UAAN,IAAoBA,IAAI,IAAE,IAHZ;AAAA;AAAA;AAAA;;AAIhBA,YAAAA,IAAI,GAACY,IAAI,CAACC,KAAL,CAAWb,IAAX,CAAL;AAJgB;AAAA,mBAKVJ,IAAI,CAACwB,GAAL,CAAS,OAAT,EAAiB;AACrBL,cAAAA,OAAO,EAAC;AACN,iCAAiB,YAAYf,IAAI,CAACiB;AAD5B;AADa,aAAjB,EAKLC,IALK,CAKC,UAAAG,QAAQ,EAAI;AACjBX,cAAAA,YAAY,CAACY,OAAb,CAAqB,OAArB,EAA6BV,IAAI,CAACW,SAAL,CAAeF,QAAQ,CAACb,IAAxB,CAA7B;AACD,aAPK,EAQLgB,KARK,CAQC,UAAAC,KAAK,EAAI;AACdC,cAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACD,aAVK,CALU;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAAXN,WAAW;AAAA;AAAA;AAAA,GAAjB;;AAoBA,IAAMS,QAAQ,GAAG,SAAXA,QAAW,GAAU;AACzBT,EAAAA,WAAW;AACX,MAAIU,KAAK,GAAEnB,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAX;;AACA,MAAGkB,KAAK,IAAE,WAAP,IAAsBA,KAAK,IAAE,IAAhC,EAAsC;AACpC,WAAOjB,IAAI,CAACC,KAAL,CAAWgB,KAAX,CAAP;AACD;;AACD,SAAO,EAAP;AACD,CAPD;;AASA,SACEhC,OADF,EAEE+B,QAFF","sourcesContent":["import {HTTP} from '@/services/axios.js'\n\nconst newPost = function () {\n  return {\n    online: false,\n    liked:0,\n    user: {\n      name: 'Planck Anders',\n      image_url: 'https://scontent-mxp1-1.xx.fbcdn.net/v/t1.6435-9/69245733_725030284603206_5683149216247971840_n.jpg?_nc_cat=104&ccb=1-5&_nc_sid=09cbfe&_nc_ohc=2wstdYB3PNQAX89jAUm&tn=L8SKpZX-hIdGHkiX&_nc_ht=scontent-mxp1-1.xx&oh=9067fd6a9e1a4aa9a72add11944ddd40&oe=614F37FD',\n    },\n    title: '',\n    description: '',\n    images: [],\n    tags:[],\n  }\n}\n\n\nconst registerPost = async function (data) {\n  let accessInfo = localStorage.getItem('accessInfo')\n  if (accessInfo != 'undefined' && accessInfo != null) {\n    accessInfo = JSON.parse(accessInfo)\n\n    await HTTP.post('posts', data, {\n      headers: {\n        Authorization: 'Barear' + accessInfo.token\n      }\n    })\n    .then()\n  }\n}\n\nconst GetAllPosts = async function () {\n  let user = localStorage.getItem('accessInfo')\n  \n  if (user!='undefine' && user!=null) {\n    user=JSON.parse(user)\n    await HTTP.get('posts',{\n      headers:{\n        'Authorization': 'Bearer ' + user.token\n      }\n    })\n    .then( response => {\n      localStorage.setItem('Posts',JSON.stringify(response.data))\n    })\n    .catch(error => {\n      console.log(error)\n    })\n  }\n\n}\n\nconst allPosts = function(){\n  GetAllPosts()\n  let posts= localStorage.getItem('Posts')\n  if(posts!='undefined' && posts!=null) {\n    return JSON.parse(posts)\n  }\n  return []\n}\n\nexport {\n  newPost,\n  allPosts\n}"]},"metadata":{},"sourceType":"module"}