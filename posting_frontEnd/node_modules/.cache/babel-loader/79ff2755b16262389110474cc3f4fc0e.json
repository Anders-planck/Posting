{"ast":null,"code":"import _asyncToGenerator from \"/Users/anders/Desktop/work/Vue/Posting-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport \"regenerator-runtime/runtime.js\";\nimport { Axios } from \"@/services/axios.js\";\nimport router from \"../router\";\n\nvar RegisterUser = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(data) {\n    var result;\n    return regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            result = null;\n            _context.prev = 1;\n            _context.next = 4;\n            return Axios.post('users', data).then(function (response) {\n              result = response.data;\n            });\n\n          case 4:\n            return _context.abrupt(\"return\", result);\n\n          case 7:\n            _context.prev = 7;\n            _context.t0 = _context[\"catch\"](1);\n            console.log(_context.t0);\n\n          case 10:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[1, 7]]);\n  }));\n\n  return function RegisterUser(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nvar LoginUser = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(data) {\n    var result;\n    return regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            result = null;\n            _context2.prev = 1;\n            _context2.next = 4;\n            return Axios.post('auth/login', data).then(function (response) {\n              result = response.data;\n            });\n\n          case 4:\n            return _context2.abrupt(\"return\", result);\n\n          case 7:\n            _context2.prev = 7;\n            _context2.t0 = _context2[\"catch\"](1);\n            console.log(_context2.t0);\n\n          case 10:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2, null, [[1, 7]]);\n  }));\n\n  return function LoginUser(_x2) {\n    return _ref2.apply(this, arguments);\n  };\n}();\n\nvar SetUser = /*#__PURE__*/function () {\n  var _ref3 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3(id, token) {\n    return regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.next = 2;\n            return Axios.get('/users/' + id, {\n              headers: {\n                'Authorization': 'Bearer ' + token\n              }\n            }).then(function (response) {\n              localStorage.setItem('user', JSON.stringify(response.data));\n            }).catch(function (e) {\n              console.log(e);\n            });\n\n          case 2:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n\n  return function SetUser(_x3, _x4) {\n    return _ref3.apply(this, arguments);\n  };\n}();\n\nvar GetAccessInfo = function GetAccessInfo() {\n  var accessInfo = localStorage.getItem('accessInfo');\n\n  if (accessInfo != 'undefined' && accessInfo != null) {\n    accessInfo = JSON.parse(accessInfo);\n    var exp = new Date(accessInfo.exp);\n    var now = new Date();\n\n    if (accessInfo.token != '' && now < exp) {\n      SetUser(accessInfo.user_id, accessInfo.token);\n      return true;\n    }\n\n    console.log(now, now > exp);\n\n    if (accessInfo.token == '' || now > exp) {\n      alert('qua');\n      reject();\n      return false;\n    }\n  }\n\n  if (accessInfo == 'undefined' || accessInfo == null) {\n    alert('qua qua');\n    reject();\n    return false;\n  }\n};\n\nvar reject = function reject() {\n  localStorage.removeItem('accessInfo');\n  localStorage.removeItem('user');\n};\n\nvar GetUser = function GetUser() {\n  var user = localStorage.getItem('user');\n\n  if (user !== 'undefined' && user != null) {\n    return JSON.parse(user);\n  }\n\n  return null;\n};\n\nexport { RegisterUser, LoginUser, GetUser, GetAccessInfo };","map":{"version":3,"sources":["/Users/anders/Desktop/work/Vue/Posting-app/src/services/UsersServices.js"],"names":["Axios","router","RegisterUser","data","result","post","then","response","console","log","LoginUser","SetUser","id","token","get","headers","localStorage","setItem","JSON","stringify","catch","e","GetAccessInfo","accessInfo","getItem","parse","exp","Date","now","user_id","alert","reject","removeItem","GetUser","user"],"mappings":"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","sourcesContent":["import {\n  Axios\n} from \"@/services/axios.js\"\nimport router from \"../router\";\n\n\nconst RegisterUser = async function (data) {\n  let result = null;\n  try {\n    await Axios.post('users', data)\n      .then(response => {\n        result = response.data\n      })\n    return result\n  } catch (error) {\n    console.log(error)\n  }\n}\nconst LoginUser = async function (data) {\n  let result = null\n  try {\n    await Axios.post('auth/login', data)\n      .then(response => {\n        result = response.data\n      })\n    return result\n  } catch (error) {\n    console.log(error)\n  }\n}\n\nconst SetUser = async function (id, token) {\n  await Axios.get('/users/' + id, {\n      headers: {\n        'Authorization': 'Bearer ' + token\n      }\n    })\n    .then(response => {\n      localStorage.setItem('user', JSON.stringify(response.data))\n    })\n    .catch(e => {\n      console.log(e)\n    })\n}\n\n\nconst GetAccessInfo = function () {\n  let accessInfo = localStorage.getItem('accessInfo')\n  if (accessInfo != 'undefined' && accessInfo != null) {\n    accessInfo = JSON.parse(accessInfo)\n    let exp = new Date(accessInfo.exp)\n    let now = new Date()\n\n    if (accessInfo.token != '' && now < exp) {\n      SetUser(accessInfo.user_id, accessInfo.token)\n      return true\n    }\n    console.log( now, now > exp)\n    if(accessInfo.token == '' || now > exp){\n      alert('qua')\n      reject()\n      return false\n    }\n    \n  }\n  if(accessInfo == 'undefined' || accessInfo==null){\n    alert('qua qua')\n    reject()\n    return false\n  }\n}\n\nconst reject = function () {\n  localStorage.removeItem('accessInfo')\n  localStorage.removeItem('user')\n}\n\n\nconst GetUser = function () {\n  let user = localStorage.getItem('user')\n  if (user !== 'undefined' && user != null) {\n    return JSON.parse(user)\n  }\n  return null\n}\n\n\nexport {\n  RegisterUser,\n  LoginUser,\n  GetUser,\n  GetAccessInfo\n}"]},"metadata":{},"sourceType":"module"}