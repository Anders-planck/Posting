{"ast":null,"code":"import _asyncToGenerator from \"/Users/anders/Desktop/work/Vue/Posting-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport \"regenerator-runtime/runtime.js\";\nimport { Axios } from \"@/services/axios.js\";\nexport default {\n  RegisterUser: function RegisterUser(data) {\n    return _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n      var result;\n      return regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              result = null;\n              _context.prev = 1;\n              _context.next = 4;\n              return Axios.post('users', data).then(function (response) {\n                result = response.data;\n              });\n\n            case 4:\n              return _context.abrupt(\"return\", result);\n\n            case 7:\n              _context.prev = 7;\n              _context.t0 = _context[\"catch\"](1);\n              console.log(_context.t0);\n\n            case 10:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[1, 7]]);\n    }))();\n  },\n  LoginUser: function LoginUser(data) {\n    return _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {\n      var result;\n      return regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              result = null;\n              _context2.prev = 1;\n              _context2.next = 4;\n              return Axios.post('auth/login', data).then(function (response) {\n                result = response.data;\n              });\n\n            case 4:\n              return _context2.abrupt(\"return\", result);\n\n            case 7:\n              _context2.prev = 7;\n              _context2.t0 = _context2[\"catch\"](1);\n              console.log(_context2.t0);\n\n            case 10:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[1, 7]]);\n    }))();\n  },\n  SetUser: function () {\n    var _SetUser = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3(id, token) {\n      return regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return Axios.get('/users/' + id, {\n                headers: {\n                  'Authorization': 'Bearer ' + token\n                }\n              }).then(function (response) {\n                localStorage.setItem('user', JSON.stringify(response.data));\n              }).catch(function (e) {\n                console.log(e);\n              });\n\n            case 2:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    function SetUser(_x, _x2) {\n      return _SetUser.apply(this, arguments);\n    }\n\n    return SetUser;\n  }(),\n  GetAccessInfo: function GetAccessInfo() {\n    var accessInfo = localStorage.getItem('accessInfo');\n\n    if (accessInfo != 'undefined' && accessInfo != null) {\n      accessInfo = JSON.parse(accessInfo);\n      var exp = new Date(accessInfo.exp);\n      var now = new Date();\n\n      if (accessInfo.token != '' && exp < now) {\n        var user = localStorage.getItem('user');\n\n        if (user == 'undefined' || user == null) {\n          SetUser(accessInfo.user_id, accessInfo.token);\n        }\n\n        return true;\n      }\n    }\n\n    return false;\n  },\n  GetUser: function GetUser() {\n    var user = localStorage.getItem('user');\n\n    if (user !== 'undefined' && user != null) {\n      return JSON.parse(user);\n    }\n\n    return null;\n  }\n};","map":{"version":3,"sources":["/Users/anders/Desktop/work/Vue/Posting-app/src/services/UsersServices.js"],"names":["Axios","RegisterUser","data","result","post","then","response","console","log","LoginUser","SetUser","id","token","get","headers","localStorage","setItem","JSON","stringify","catch","e","GetAccessInfo","accessInfo","getItem","parse","exp","Date","now","user","user_id","GetUser"],"mappings":"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","sourcesContent":["import {Axios} from \"@/services/axios.js\"\n\nexport default {\n  async RegisterUser(data) {\n    let result = null;\n    try {\n      await Axios.post('users', data)\n        .then(response => {\n          result = response.data\n        })\n      return result\n    } catch (error) {\n      console.log(error)\n    }\n\n  },\n  async LoginUser(data) {\n    let result = null\n    try {\n      await Axios.post('auth/login', data)\n        .then(response => {\n          result = response.data\n        })\n      return result\n    } catch (error) {\n      console.log(error)\n    }\n  },\n\n  SetUser : async function (id, token) {\n    await Axios.get('/users/' + id, {\n        headers: {\n          'Authorization': 'Bearer ' + token\n        }\n      })\n      .then(response => {\n        localStorage.setItem('user', JSON.stringify(response.data))\n      })\n      .catch(e => {\n        console.log(e)\n      })\n  },\n\n  GetAccessInfo : function () {\n    let accessInfo = localStorage.getItem('accessInfo')\n    if (accessInfo != 'undefined' && accessInfo != null) {\n      accessInfo = JSON.parse(accessInfo)\n      let exp = new Date(accessInfo.exp)\n      let now = new Date()\n      if (accessInfo.token != '' && exp < now) {\n        let user = localStorage.getItem('user')\n        if (user == 'undefined' || user == null) {\n          SetUser(accessInfo.user_id, accessInfo.token)\n        }\n        return true\n      }\n    }\n    return false\n  },\n\n\n  GetUser : function () {\n    let user = localStorage.getItem('user')\n    if (user !== 'undefined' && user != null) {\n      return JSON.parse(user)\n    }\n    return null\n  }\n\n}"]},"metadata":{},"sourceType":"module"}