{"ast":null,"code":"import _slicedToArray from \"/Users/anders/Desktop/work/Vue/Posting-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _asyncToGenerator from \"/Users/anders/Desktop/work/Vue/Posting-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport \"regenerator-runtime/runtime.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/es.object.entries.js\";\nimport \"core-js/modules/es.array.sort.js\";\nimport { newPost, allPosts, registerPost } from '@/services/PostsServices.js';\nimport router from '../../router';\nimport { HTTP } from '../../services/axios';\nexport default {\n  state: {\n    post: newPost(),\n    posts: allPosts(),\n    step: 1\n  },\n  mutations: {\n    nextStep: function nextStep(state) {\n      return state.step++;\n    },\n    backStep: function backStep(state) {\n      return state.step--;\n    },\n    setStep: function setStep(state, payload) {\n      return state.step = payload;\n    },\n    addPost: function addPost(state, payload) {\n      //state.posts.push(payload)\n      registerPost(payload);\n      state.posts = allPosts;\n      console.log('state', state);\n      router.push('/');\n    },\n    setCommentPost: function () {\n      var _setCommentPost = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(state, payload) {\n        var user, formData;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                user = localStorage.getItem('accessInfo');\n\n                if (!(user != 'undefined' && user != null)) {\n                  _context.next = 7;\n                  break;\n                }\n\n                user = JSON.parse(user);\n                formData = new FormData();\n                Object.entries(payload).forEach(function (_ref) {\n                  var _ref2 = _slicedToArray(_ref, 2),\n                      key = _ref2[0],\n                      value = _ref2[1];\n\n                  return formData.append(key, value);\n                });\n                _context.next = 7;\n                return HTTP.post('posts/' + payload.post_id + '/comments', formData, {\n                  headers: {\n                    'Authorization': 'Bearer ' + user.token,\n                    'Content-Type': \"multipart/form-data\"\n                  }\n                }).then(function (response) {\n                  allPosts();\n                }).catch(function (error) {\n                  return console.log(error);\n                });\n\n              case 7:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function setCommentPost(_x, _x2) {\n        return _setCommentPost.apply(this, arguments);\n      }\n\n      return setCommentPost;\n    }(),\n    resetPost: function resetPost(state) {\n      return state.post = newPost();\n    }\n  },\n  actions: {},\n  getters: {\n    getPost: function getPost(state) {\n      return state.post;\n    },\n    getPosts: function getPosts(state) {\n      return state.posts.sort(function (a, b) {\n        return b.id - a.id;\n      });\n    },\n    getStep: function getStep(state) {\n      return state.step;\n    }\n  }\n};","map":{"version":3,"sources":["/Users/anders/Desktop/work/Vue/Posting-app/src/store/modules/posts.js"],"names":["newPost","allPosts","registerPost","router","HTTP","state","post","posts","step","mutations","nextStep","backStep","setStep","payload","addPost","console","log","push","setCommentPost","user","localStorage","getItem","JSON","parse","formData","FormData","Object","entries","forEach","key","value","append","post_id","headers","token","then","response","catch","error","resetPost","actions","getters","getPost","getPosts","sort","a","b","id","getStep"],"mappings":"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","sourcesContent":["import {\n    newPost,\n    allPosts,\n    registerPost,\n} from '@/services/PostsServices.js'\nimport router from '../../router'\nimport { HTTP } from '../../services/axios'\n\n\n\nexport default {\n    state: {\n        post: newPost(),\n        posts: allPosts(),\n        step: 1,\n    },\n\n    mutations: {\n        nextStep: state => state.step++,\n        backStep: state => state.step--,\n        setStep: (state, payload) => (state.step = payload),\n        addPost:  (state, payload) => {\n            //state.posts.push(payload)\n            registerPost(payload)\n            state.posts=allPosts\n            console.log('state',state)\n            \n            router.push('/')\n\n        },\n        setCommentPost: async (state, payload) => {\n            let user = localStorage.getItem('accessInfo')\n  \n            if (user!='undefined' && user!=null) {\n                user=JSON.parse(user)\n                let formData = new FormData()\n                Object.entries(payload).forEach(\n                ([key, value]) => formData.append(key, value)\n                )\n                await HTTP.post('posts/'+payload.post_id+'/comments',formData,{\n                    headers:{\n                        'Authorization': 'Bearer ' + user.token,\n                        'Content-Type': \"multipart/form-data\",\n                    }\n                })\n                .then(response=>{allPosts()})\n                .catch(error => console.log(error))\n            }\n        },\n        resetPost: state => state.post = newPost(),\n    },\n    actions: {},\n    getters: {\n        getPost: state => state.post,\n        getPosts: state => state.posts.sort((a, b) => b.id - a.id),\n        getStep: state => state.step,\n    },\n}\n  "]},"metadata":{},"sourceType":"module"}