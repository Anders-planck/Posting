{"ast":null,"code":"import _defineProperty from \"/Users/anders/Desktop/work/Vue/Posting-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _asyncToGenerator from \"/Users/anders/Desktop/work/Vue/Posting-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport \"regenerator-runtime/runtime.js\";\nimport Vue from 'vue';\nimport Vuex from 'vuex';\nimport users from '@/services/users.js';\nimport { Axios } from '@/services/axios.js';\nVue.use(Vuex);\n\nvar newPost = function newPost() {\n  return {\n    id: null,\n    online: false,\n    at: \"\",\n    liked: {\n      state: false,\n      nber: 0\n    },\n    author: {\n      name: 'Planck Anders',\n      foto: 'https://scontent-mxp1-1.xx.fbcdn.net/v/t1.6435-9/69245733_725030284603206_5683149216247971840_n.jpg?_nc_cat=104&ccb=1-5&_nc_sid=09cbfe&_nc_ohc=2wstdYB3PNQAX89jAUm&tn=L8SKpZX-hIdGHkiX&_nc_ht=scontent-mxp1-1.xx&oh=9067fd6a9e1a4aa9a72add11944ddd40&oe=614F37FD'\n    },\n    tags: [],\n    title: '',\n    description: '',\n    images: [],\n    comments: []\n  };\n};\n\nvar newStatus = function newStatus() {\n  return {\n    id: null,\n    online: false,\n    at: \"\",\n    liked: {\n      state: false,\n      nber: 0\n    },\n    author: {\n      name: 'Planck Anders',\n      foto: 'https://scontent-mxp1-1.xx.fbcdn.net/v/t1.6435-9/69245733_725030284603206_5683149216247971840_n.jpg?_nc_cat=104&ccb=1-5&_nc_sid=09cbfe&_nc_ohc=2wstdYB3PNQAX89jAUm&tn=L8SKpZX-hIdGHkiX&_nc_ht=scontent-mxp1-1.xx&oh=9067fd6a9e1a4aa9a72add11944ddd40&oe=614F37FD'\n    },\n    tags: [],\n    images: [],\n    comments: []\n  };\n};\n\nvar GetUser = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n    var user, accessInfo, exp, now;\n    return regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            user = localStorage.getItem('user');\n            accessInfo = localStorage.getItem('accessInfo');\n            if (accessInfo) accessInfo = JSON.parse(accessInfo);\n            exp = new Date(accessInfo.exp);\n            now = new Date();\n            console.log('qua');\n\n            if (!(accessInfo.token != '' && exp < now)) {\n              _context.next = 9;\n              break;\n            }\n\n            _context.next = 9;\n            return Axios.get('/users/' + accessInfo.user_id, {\n              headers: {\n                'Authorization': 'Bearer ' + accessInfo.token\n              }\n            }).then(function (response) {\n              user = response.data;\n              console.log(user);\n              localStorage.setItem('user', JSON.stringify(user));\n            });\n\n          case 9:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function GetUser() {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nvar GetAccessInfo = function GetAccessInfo() {\n  var accessInfo = localStorage.getItem('accessInfo');\n\n  if (accessInfo) {\n    accessInfo = JSON.parse(accessInfo);\n    var exp = new Date(accessInfo.exp);\n    var now = new Date();\n\n    if (accessInfo.token != '' && exp < now) {\n      var user = localStorage.getItem('user');\n\n      if (user == 'undefined' || user == null) {\n        SetUser();\n      }\n\n      return true;\n    } else return false;\n  } else return false;\n};\n\nexport default new Vuex.Store({\n  state: {\n    logged: GetAccessInfo(),\n    currentUser: GetUser(),\n    users: [],\n    step: 1,\n    post: newPost(),\n    posts: [newPost()],\n    status: [newStatus(), newStatus(), newStatus(), newStatus(), newStatus(), newStatus(), newStatus(), newStatus(), newStatus(), newStatus(), newStatus(), newStatus(), newStatus(), newStatus(), newStatus()],\n    oneStatus: newStatus()\n  },\n  mutations: {\n    nextStep: function nextStep(state) {\n      return state.step++;\n    },\n    backStep: function backStep(state) {\n      return state.step--;\n    },\n    setStep: function setStep(state, payload) {\n      return state.step = payload;\n    },\n    addPost: function addPost(state, payload) {\n      return state.posts.push(payload);\n    },\n    addStatus: function addStatus(state, payload) {\n      return state.status.push(payload);\n    },\n    setCommentPost: function setCommentPost(state, payload) {\n      return state.posts[payload.id].comments.push(payload);\n    },\n    setCommentStatus: function setCommentStatus(state, payload) {\n      return state.status[payload.id].comments.push(payload);\n    },\n    resetPost: function resetPost(state) {\n      return state.post = newPost();\n    },\n    resetStatus: function resetStatus(state) {\n      return state.oneStatus = newStatus();\n    },\n    Register: function Register(state, payload) {\n      var result = users.RegisterUser(payload);\n      result.then(function (response) {\n        state.currentUser = response;\n        localStorage.setItem('user', JSON.stringify(state.currentUser));\n      });\n    },\n    Login: function Login(state, payload) {\n      var result = users.LoginUser(payload);\n      result.then(function (response) {\n        var accessInfo = response;\n        localStorage.setItem('accessInfo', JSON.stringify(accessInfo));\n      });\n    }\n  },\n  actions: {},\n  getters: _defineProperty({\n    getLogged: function getLogged(state) {\n      return state.logged;\n    },\n    getCurrentUser: function getCurrentUser(state) {\n      return state.currentUser;\n    },\n    getPost: function getPost(state) {\n      return state.post;\n    },\n    getStatus: function getStatus(state) {\n      return state.oneStatus;\n    },\n    getPosts: function getPosts(state) {\n      return state.posts;\n    },\n    getStep: function getStep(state) {\n      return state.step;\n    }\n  }, \"getStatus\", function getStatus(state) {\n    return state.status;\n  }),\n  modules: {}\n});","map":{"version":3,"sources":["/Users/anders/Desktop/work/Vue/Posting-app/src/store/index.js"],"names":["Vue","Vuex","users","Axios","use","newPost","id","online","at","liked","state","nber","author","name","foto","tags","title","description","images","comments","newStatus","GetUser","user","localStorage","getItem","accessInfo","JSON","parse","exp","Date","now","console","log","token","get","user_id","headers","then","response","data","setItem","stringify","GetAccessInfo","SetUser","Store","logged","currentUser","step","post","posts","status","oneStatus","mutations","nextStep","backStep","setStep","payload","addPost","push","addStatus","setCommentPost","setCommentStatus","resetPost","resetStatus","Register","result","RegisterUser","Login","LoginUser","actions","getters","getLogged","getCurrentUser","getPost","getStatus","getPosts","getStep","modules"],"mappings":"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","sourcesContent":["import Vue from 'vue'\nimport Vuex from 'vuex'\nimport users from '@/services/users.js'\nimport {\n  Axios\n} from '@/services/axios.js'\n\nVue.use(Vuex)\n\nconst newPost = function () {\n  return {\n    id: null,\n    online: false,\n    at: \"\",\n    liked: {\n      state: false,\n      nber: 0,\n    },\n    author: {\n      name: 'Planck Anders',\n      foto: 'https://scontent-mxp1-1.xx.fbcdn.net/v/t1.6435-9/69245733_725030284603206_5683149216247971840_n.jpg?_nc_cat=104&ccb=1-5&_nc_sid=09cbfe&_nc_ohc=2wstdYB3PNQAX89jAUm&tn=L8SKpZX-hIdGHkiX&_nc_ht=scontent-mxp1-1.xx&oh=9067fd6a9e1a4aa9a72add11944ddd40&oe=614F37FD',\n    },\n    tags: [],\n    title: '',\n    description: '',\n    images: [],\n    comments: [],\n  }\n}\n\nconst newStatus = function () {\n  return {\n    id: null,\n    online: false,\n    at: \"\",\n    liked: {\n      state: false,\n      nber: 0,\n    },\n    author: {\n      name: 'Planck Anders',\n      foto: 'https://scontent-mxp1-1.xx.fbcdn.net/v/t1.6435-9/69245733_725030284603206_5683149216247971840_n.jpg?_nc_cat=104&ccb=1-5&_nc_sid=09cbfe&_nc_ohc=2wstdYB3PNQAX89jAUm&tn=L8SKpZX-hIdGHkiX&_nc_ht=scontent-mxp1-1.xx&oh=9067fd6a9e1a4aa9a72add11944ddd40&oe=614F37FD',\n    },\n    tags: [],\n    images: [],\n    comments: [],\n  }\n}\n\nconst GetUser =  async function () {\n  let user = localStorage.getItem('user')\n  \n    let accessInfo = localStorage.getItem('accessInfo')\n    if (accessInfo) accessInfo = JSON.parse(accessInfo)\n    let exp = new Date(accessInfo.exp)\n    let now = new Date()\n    console.log('qua')\n    if (accessInfo.token != '' && exp < now) {\n\n    await  Axios.get('/users/' + accessInfo.user_id, {\n          headers: {\n            'Authorization': 'Bearer ' + accessInfo.token\n          }\n        })\n        .then(response => {\n          user = response.data\n          console.log(user)\n          localStorage.setItem('user', JSON.stringify(user))\n          \n        })\n      \n    }\n  \n}\n\nconst GetAccessInfo = function () {\n  let accessInfo = localStorage.getItem('accessInfo')\n  if (accessInfo) {\n    accessInfo = JSON.parse(accessInfo)\n    let exp = new Date(accessInfo.exp)\n    let now = new Date()\n    if (accessInfo.token != '' && exp < now) {\n      let user = localStorage.getItem('user')\n      if (user == 'undefined' || user ==null) {\n        SetUser()\n      } \n      return true\n    } else return false\n  } else return false\n}\n\n\n\nexport default new Vuex.Store({\n  state: {\n    logged: GetAccessInfo(),\n    currentUser: GetUser(),\n    users: [],\n    step: 1,\n    post: newPost(),\n    posts: [\n      newPost(),\n    ],\n    status: [\n      newStatus(),\n      newStatus(),\n      newStatus(),\n      newStatus(),\n      newStatus(),\n      newStatus(),\n      newStatus(),\n      newStatus(),\n      newStatus(),\n      newStatus(),\n      newStatus(),\n      newStatus(),\n      newStatus(),\n      newStatus(),\n      newStatus(),\n    ],\n    oneStatus: newStatus(),\n  },\n  mutations: {\n    nextStep: state => state.step++,\n    backStep: state => state.step--,\n    setStep: (state, payload) => (state.step = payload),\n    addPost: (state, payload) => (state.posts.push(payload)),\n    addStatus: (state, payload) => (state.status.push(payload)),\n    setCommentPost: (state, payload) => (state.posts[payload.id].comments.push(payload)),\n    setCommentStatus: (state, payload) => (state.status[payload.id].comments.push(payload)),\n    resetPost: state => state.post = newPost(),\n    resetStatus: state => state.oneStatus = newStatus(),\n    Register: (state, payload) => {\n      let result = users.RegisterUser(payload)\n      result.then(response => {\n        state.currentUser = response\n        localStorage.setItem('user', JSON.stringify(state.currentUser))\n      })\n\n    },\n    Login: (state, payload) => {\n      let result = users.LoginUser(payload)\n      result.then(response => {\n        let accessInfo = response\n        localStorage.setItem('accessInfo', JSON.stringify(accessInfo))\n      })\n    }\n  },\n  actions: {},\n  getters: {\n    getLogged: state => state.logged,\n    getCurrentUser: state => state.currentUser,\n    getPost: state => state.post,\n    getStatus: state => state.oneStatus,\n    getPosts: state => state.posts,\n    getStep: state => state.step,\n    getStatus: state => state.status\n  },\n\n  modules: {}\n})"]},"metadata":{},"sourceType":"module"}